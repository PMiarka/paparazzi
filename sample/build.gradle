apply plugin: 'com.android.library'
apply plugin: 'org.jetbrains.kotlin.android'
apply plugin: 'app.cash.paparazzi'

android {
  namespace 'app.cash.paparazzi.sample'

  compileSdk libs.versions.compileSdk.get() as int
  defaultConfig {
    minSdk libs.versions.minSdk.get() as int
  }
  compileOptions {
    sourceCompatibility = libs.versions.javaTarget.get()
    targetCompatibility = libs.versions.javaTarget.get()
  }
  buildFeatures {
    compose true
    viewBinding true
  }
  composeOptions {
    kotlinCompilerExtensionVersion libs.versions.composeCompiler.get()
  }
}

dependencies {
  api libs.guava

  implementation libs.composeUi.material
  implementation libs.composeUi.uiTooling

  testImplementation libs.testParameterInjector
  // to reproduce java.lang.NoSuchMethodError (ImmutableMap)
  // uncomment the line (testImplementation libs.test.coroutines) and run ComposeA11yTest
  //  testImplementation libs.test.coroutines

  testImplementation "com.lemonappdev:konsist:0.13.0"

}

// https://github.com/diffplug/spotless/issues/1572
tasks.withType(com.diffplug.gradle.spotless.SpotlessTask).configureEach {
  dependsOn(tasks.withType(Test))
}
